<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="com.cmcc.omp.omee.acs.northaccess.dao.ILocalWhitelistDao">
	<select id="getEnabledByLocalWhite" resultType="boolean" parameterType="LocalWhite">
		select enabled from localwhitelist where phonenum = #{phoneNum} and appid = #{appid}
	</select>
	<select id="getAllLocalWhiteAppidList" resultType="java.lang.String">
		select distinct appid from localwhitelist
	</select>
	<select id="getLocalWhiteListByAppid" resultType="LocalWhite">
		select * from localwhitelist where appid= #{appid}
	</select>
	<insert id="mysqlInsertAllLocalWhitelistByAppid" parameterType="java.util.List">
        insert into localwhitelist(appid,phonenum,enabled) values
    	<foreach collection="list" item="item" separator=",">  
        (#{item.appid},#{item.phoneNum},#{item.enabled})
    	</foreach> 
    </insert>
    <insert id="insertOneLocalWhiteByAppid"  parameterType="LocalWhite">
        insert into localwhitelist(appid,phonenum,enabled) values(#{appid},#{phoneNum},#{enabled})  
    </insert>
	<delete id="deleteOneLocalWhiteByAppidPhone" parameterType="LocalWhite">
		delete from localwhitelist where phonenum=#{phoneNum} and appid = #{appid}
	</delete>
	<delete id="deleteAllLocalWhiteByAppid" parameterType="java.lang.String">
		delete from localwhitelist where appid = #{appid}
	</delete>
	<update id="updateOneLocalWhiteByAppidPhone" parameterType="java.util.Map">
    	update localwhitelist set phonenum= #{newPhoneNum} where appid = #{appid} and phonenum = #{oldPhoneNum}
    </update>
</mapper>